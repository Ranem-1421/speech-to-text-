<!DOCTYPE html>
<html lang="ar">

<head>
	<meta charset="UTF-8">
</head>

<body>
	<div class="text" contenteditable>
		<p id="x"></p>
	</div>

	<script>
		var speech = true;
		window.SpeechRecognition = window.SpeechRecognition	|| window.webkitSpeechRecognition;

		const recognition = new SpeechRecognition();
        recognition.lang='ar';
		recognition.interimResults = true;
		const text = document.querySelector('.text');
		text.appendChild(x);

		recognition.addEventListener('result', e => {
			const transcript = Array.from(e.results)
				.map(result => result[0])
				.map(result => result.transcript)
				.join('')

			document.getElementById("x").innerHTML = transcript;
			console.log(transcript);
		});
		
		if (speech == true) {
			recognition.start();
			recognition.addEventListener('end', recognition.start);
		}
	</script>
</body>

</html>
